DROP TABLE IF EXISTS USER_ROLES;
DROP TABLE IF EXISTS USERS;

CREATE TABLE USERS (
                       ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                       EMAIL VARCHAR(255) NOT NULL UNIQUE,
                       NAME VARCHAR(100) NOT NULL,
                       GRAVATAR_URL VARCHAR(255),
                       HASHED_PASSWORD VARCHAR(255) NOT NULL,
                       ACTIVE BOOLEAN NOT NULL DEFAULT FALSE
);

CREATE TABLE USER_ROLES (
                            ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                            USER_ID BIGINT NOT NULL,
                            ROLE VARCHAR(50) NOT NULL,
                            CONSTRAINT FK_USER FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);
